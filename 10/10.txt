CREATE OR REPLACE TRIGGER MODIFICA_IMPRUMUT
    BEFORE INSERT OR UPDATE OR DELETE ON INFO_IMPRUMUT
DECLARE
    V_ZIUA NUMBER;

BEGIN

    SELECT EXTRACT(DAY FROM SYSDATE) INTO V_ZIUA FROM DUAL;

    IF MOD(V_ZIUA,2) = 0 THEN
        RAISE_APPLICATION_ERROR(-20002,'Imprumuturile nu pot fi modificate in zile pare');
    END IF;
END;

DECLARE
    V_ID_IMPRUMUT NUMBER;
BEGIN

    SELECT ID_IMPRUMUT
    INTO V_ID_IMPRUMUT
    FROM INFO_IMPRUMUT
    WHERE ROWNUM < 2;

    DELETE FROM INFO_IMPRUMUT WHERE ID_IMPRUMUT = V_ID_IMPRUMUT;

END;

DROP TRIGGER MODIFICA_IMPRUMUT;